<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../thelma-core/thelma_core.html">
<link rel="import" href="../thelma-utils/th-theme.html">
<link rel="import" href="../core-ajax/core-ajax.html">
<link rel="import" href="../basic-seamless-iframe/basic-seamless-iframe.html">


<polymer-element extends="th-animated" name="th-google-form" attributes="width height src">
  <core-style ref="theme"></core-style>
  <style>

  </style>
  <template>
      <core-ajax id="formRequest"
        url="http://www.corsproxy.com/docs.google.com/forms/d/18KBVx88jEDb8KP4NjsK4e5g2ieggQ6XlPH5WoJMf_u4/viewform"
        handleAs="text"  
        on-core-response="{{parseResponse}}">
      </core-ajax>

    <basic-seamless-iframe id="googleform" style="width: {{width}}px; height: {{height}}px;" src="{{src}}"></basic-seamless-iframe>

  </template>

  <script>

    Polymer('th-google-form', {

      domReady: function() {
        var self = this;

        self.requestUrl = self.src.replace(/(ftp|http|https):\/\//,'http://www.corsproxy.com/');
        self.$.formRequest.go();
        console.log(self.requestUrl);
        
        

      },
      parseResponse: function(event, r){
        console.log(event);
        console.log(r);
      }
    });

  </script>

</polymer-element>
